{
    "$schema": "https://json-schema.org/draft-07/schema#",
    "$id": "quest_stage_definition.json",
    "type": "object",
    "title": "QuestStageDefinition",
    "description": "A definition of a quest stage",
    "deprecated": false,
    "properties": {
        "label": {
            "type": "string",
            "description": "Unique identifier for the quest stage definition",
            "examples": [
                "welcome_quest_initial"
            ]
        },
        "quest_label": {
            "type": "string",
            "description": "Label of the quest this stage belongs to",
            "examples": [
                "welcome_quest"
            ]
        },
        "stage_index": {
            "type": "integer",
            "description": "Index of this stage within the quest",
            "examples": [
                1
            ]
        },
        "description": {
            "type": "string",
            "description": "Description of the quest stage",
            "examples": [
                "Talk to Gus"
            ]
        },
        "dialogue_label": {
            "type": "string",
            "description": "Label of the dialogue associated with this stage",
            "examples": [
                "first_welcome"
            ]
        },
        "objectives": {
            "type": "array",
            "description": "List of objectives that must be completed for this stage",
            "items": {
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": [
                            "TALK_TO",
                            "COLLECT",
                            "KILL",
                            "VISIT",
                            "INTERACT",
                            "REACH_LEVEL"
                        ]
                    },
                    "target": {
                        "type": "string",
                        "description": "The NPC, item, entity, or location this objective applies to"
                    },
                    "amount": {
                        "type": "integer",
                        "minimum": 1,
                        "description": "How many of the target are required"
                    },
                    "optional": {
                        "type": "boolean",
                        "default": false,
                        "description": "If true, this objective is optional"
                    }
                },
                "required": [
                    "type",
                    "target"
                ],
                "additionalProperties": false
            },
            "examples": [
                {
                    "type": "TALK_TO",
                    "target": "npc_gus"
                }
            ]
        },
        "next_stage_label": {
            "type": [
                "string",
                "null"
            ],
            "description": "Label of the next stage in the quest",
            "examples": [
                "welcome_quest_gus_hello"
            ]
        }
    },
    "required": [
        "label",
        "quest_label",
        "stage_index",
        "description",
        "dialogue_label",
        "objectives"
    ]
}